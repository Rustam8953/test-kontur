Fancybox.bind("[data-fancybox]",{hideScrollbar:!1}),ymaps.ready(function(){const e=[55.028894,82.926493];new ymaps.Map("map",{center:e,zoom:15,controls:[],options:{height:"100%",controls:[]}}).geoObjects.add(new ymaps.Placemark(e,{iconContent:'<div class="map-cap">Депутатская улица, 46</div>'},{iconLayout:"default#imageWithContent",iconImageHref:"../assets/img/icons/map-mark.svg",iconImageSize:[60,68],iconImageOffset:[-30,-65]}))}),new Swiper(".swiper",{loop:!0,slidesPerView:1,effect:"fade",navigation:{nextEl:".next",prevEl:".prev"},interval:15e3});let smartLoc=navigator.userAgent,pickclick=smartLoc.match(/iPad/i)||smartLoc.match(/iPhone/)?"touchstart":"click";const dateStroke=document.getElementById("date"),date=new Date,currentDate=date.getFullYear();dateStroke.innerText=currentDate;const form=document.forms.form,modal=document.querySelector(".modal"),modalOpen=document.querySelector("[modal-open]"),modalClose=document.querySelector("[modal-close]"),headerContent=document.querySelector(".header-content"),modalBox=document.querySelector(".modal-box"),statusMes=document.getElementById("status");let menu=!1,modalState=!1;function checkState(e,t,o){const a=window.innerWidth,s=document.documentElement.clientWidth,c=a-s;1==e?(o.classList.add(t),document.body.classList.add("stuck")):(o.classList.remove(t),document.body.classList.remove("stuck"),document.body.style.paddingRight=0),a>s&&1==e&&(document.body.style.paddingRight=c+"px")}async function formSubmit(){const e=new FormData(form),t=await sendData(e);try{if(t.ok){console.log(t);let e=await t.json();console.log(e),messageStat(!0,"Успешно отправлено",statusMes)}else console.log("Error"),messageStat(!1,"Ошибка ответа сервера",statusMes)}catch(e){console.log(e),messageStat(!1,"Ошибка отправки данных",statusMes)}}async function sendData(e){await fetch("../../config/form.php",{method:"POST",body:e}).then(e=>{console.log(e)}).catch(e=>{console.log(e),messageStat(!1,"Ошибка подключения к серверу",statusMes)})}function messageStat(e,t,o){1==e?(o.innerText=t,o.classList.remove("rejected"),o.classList.add("success")):(o.innerText=t,o.classList.remove("success"),o.classList.add("rejected")),setTimeout(()=>{o.classList.remove("rejected","success")},11e3)}form.addEventListener("submit",e=>{e.preventDefault(),console.log(new FormData(form)),formSubmit(),modalBox.scrollIntoView({behavior:"smooth",block:"start"}),form.reset()}),window.addEventListener("resize",()=>{if(screen.width>1024)return checkState(menu=!1,"menu-active",headerContent)}),window.addEventListener(pickclick,e=>e.target.closest("[data-modal]")?checkState(modalState=!modalState,"active",modal):1!=modalState||e.target.closest(".modal-box")?e.target.closest("[data-menu]")?checkState(menu=!menu,"menu-active",headerContent):void 0:checkState(modalState=!1,"active",modal));